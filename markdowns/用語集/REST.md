# REST入門 基礎知識

#### RESTとは
- REST(REpresentational State Transfer)はWebサービスの設計モデルです。
- RESTなWebサービスは、そのサービスのURLにHTTPメソッドでアクセスすることでデータの送受信を行う。
- 多種多様なWebサービスがRESTのAPIを公開している。
- これら公開されているサービス(とそれで得られるデータ)と、自分で作成したシステムを組み合わせて新たなWebサービスを作成できるのがRESTの素晴らしいところ。

#### RESTの設計原則であるRESTful
- RESTは設計に際し以下を設計原則とするよう提言されています。
- アドレス指定可能なURIで公開されていること
- インターフェース(HTTPメソッドの利用)の統一がされていること
- ステートレスであること
- 処理結果がHTTPステータスコードで通知されること
- これらの原則に従ったWebサービスをRESTfulなサービスという。

#### アドレス指定可能なURI
- アドレス指定可能なURIがどのようなものかを先ほどのQiitaのAPIを例に説明する。
```
https://qiita.com/api/v2/users/TakahiRoyte
```
- 上記URIは`https://qiita.com/api/v2`が提供する`/users`(ユーザー)の中の筆者(/TakahiRoyte)と指定されている。
- RESTでは一つのリソースに対してアドレス指定可能なURIが用意されていることが推奨されている。
- リソースのURIを定義する時にはこのようにディレクトリ構造を模すとシンプルかつ直感的にサービスの利用ができる。
- URIはあくまでもリソースを示すべきなので名刺のみで構成されることが原則
- `/api/getUsers`ではなく`/api/users`とする。
- これは次に説明するHTTPメソッドとの兼ね合いにおいて大切になる。

#### インターフェースの統一

- RESTで用いられるHTTPメソッドは下記のようにCRUD操作と対応付けられる。
- 処理、HTTPメソッド、CRUD操作
- 登録、POST、CREATE
- 取得、GET、READ
- 更新、PUT、UPDATE
- 削除、DELETE、DELETE
- RESTではURIで表されたリソースに対して書くHTTPメソッドで操作を行う。
- Google CalendarのAPIを見ていく
```
登録 POST   /calendars/calendarId/events
取得 GET    /calendars/calendarId/events/eventId
更新 PUT    /calendars/calendarId/events/eventId
削除 DELETE /calendars/calendarId/events/eventId
```
- 登録だけ`/eventId`がないのは`/eventId`が自動採番されるため。
- `/eventId`が振られたイベント(一つのリソース)に対し異なるメソッドで取得、更新、削除、などを行う。
- RESTではこのようにHTTPメソッドを利用するインターフェースの統一が図られているため、サービスが利用しやすくなっている。

#### ステートレス
- **ステート**とは「状態」を意味する。
- よって**ステートレス**は「状態がない」という意味になる。
- ステートレスなやり取りにおいてサーバーはクライアントのセッション情報を保持しない。
- 逆にステートフルなやり取りにおいてはセッション情報が保持される。
- セッション情報はサーバー側で保持されないため、追加注文のたびに前の注文(状態）も合わせて送る必要が出てくる。
- これは冗長に見えるが下記のようなメリットがある。
- クライアントのリクエストはリソース操作に必要十分な情報になる。
- セッション管理がシンプルになる。
- スケーラブルなシステムにできる。

#### 処理結果をHTTPステータスコードで返す
- ステータスコードはWebサーバーからのレスポンスを表すコード
- RESTはHTTPメソッドを利用しているのでHTTPステータスコードをその結果として返却するのは自然な流れ。

- ex
- コード:200 状態:OK 説明:リクエストが正常に処理された。


#### まとめ
- RESTはあくまでも設計モデルなので、上記を守らずともRESTっぽいWebサービスは作成できる。
- 前述したように、RESTfulなサービスを作ることで異なるサービスでもAPIドキュメントさえ読めば同じように使うことができる。
